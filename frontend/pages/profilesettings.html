<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Responsive Profile Page</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    />

   
    <!-- CSS -->
    <link rel="stylesheet" href="./../assets/css/style.css" />
  </head>
  <body class="bg-gray-100">
       <div class="header__wrapper">
      <header></header>
      <div class="cols__container">
        <div class="left__col">
          <div class="img__container">
            <img src="./../assets/images/profile1.png" alt="PFP" />
            <span></span>
          </div>
          <h2>Anna Smith</h2>
          <p>UX/UI Designer</p>
          <p>anna@example.com</p>

          <ul class="about">
            <li><span>4,073</span>Followers</li>
            <li><span>322</span>Following</li>
            <li><span>200,543</span>Attraction</li>
          </ul>

          <div class="content">
            <p>
              Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam
              erat volutpat. Morbi imperdiet, mauris ac auctor dictum, nisl
              ligula egestas nulla.
            </p>

            <ul>
              <li><i class="fab fa-twitter"></i></li>
              <i class="fab fa-pinterest"></i>
              <i class="fab fa-facebook"></i>
              <i class="fab fa-dribbble"></i>
            </ul>
          </div>
        </div>
        <div class="right__col bg-gray-100">
            <div class="container " style="background-color:  #f3f4f6;box-shadow: none;">
                <div class="row">
                   <div class="col-md-12">
                      <div id="content" class="content content-full-width">
                         
                         <!-- end profile -->
                         <!-- begin profile-content -->
                         <div class="profile-content">
                            <!-- begin tab-content -->
                            <div class="tab-content p-0">
             
                               <!-- begin #profile-about tab -->
                               <div class="tab-pane fade in active show" id="profile-about">
                                  <!-- begin table -->
                                  <div class="table-responsive">
                                     <table class="table table-profile">
                                        <thead>
                                           <tr>
                                              <th></th>
                                              <th>
                                                 <h4>Micheal    Meyer <small>Lorraine Stokes</small></h4>
                                              </th>
                                           </tr>
                                        </thead>
                                        <tbody>
                                           <tr class="highlight">
                                              <td class="field">Username</td>
                                              <td><input type="text"></td>
                                           </tr>
                                           <tr class="divider">
                                              <td colspan="2"></td>
                                           </tr>
                                           <tr>
                                              <td class="field">Mobile</td>
                                              <td><input type="text"></td>
                                           </tr>
                                           <tr>
                                              <td class="field">bio</td>
                                              <td><textarea placeholder="bio" class="w-full"></textarea></td>
                                           </tr>
                                           <tr>
                                              <td class="field">skills</td>
                                              <td><input type="text"></td>
                                           </tr>
                                           <tr class="divider">
                                              <td colspan="2"></td>
                                           </tr>
                                           <tr class="highlight">
                                              <td class="field">Experience</td>
                                              <td><textarea placeholder="Add Experience" class="w-full"></textarea></td>
                                           </tr>
                                           <tr class="divider">
                                              <td colspan="2"></td>
                                           </tr>
                                        
                                           <tr>
                                              <td class="field">Subheading</td>
                                              <td><input type="text"></td>
                                           </tr>
                                           <tr>
                                          
                                           <tr>
                                              <td class="field">Social links</td>
                                              <td><input type="text"></td>
                                           </tr>
                                           <tr>
                                              <td class="field">Gender</td>
                                              <td>
                                                 <select class="form-control input-inline input-xs" name="gender">
                                                    <option value="male">Male</option>
                                                    <option value="female">Female</option>
                                                 </select>
                                              </td>
                                           </tr>
                                        
                                
                                           <tr class="divider">
                                              <td colspan="2"></td>
                                           </tr>
                                           <tr class="highlight">
                                              <td class="field">&nbsp;</td>
                                              <td class="p-t-10 p-b-10">
                                                 <button type="submit" class="btn btn-primary width-150">Update</button>
                                                 <button type="submit" class="btn btn-white btn-white-without-border width-150 m-l-5">Cancel</button>
                                              </td>
                                           </tr>
                                        </tbody>
                                     </table>
                                  </div>
                                  <!-- end table -->
                               </div>
                               <!-- end #profile-about tab -->
                            </div>
                            <!-- end tab-content -->
                         </div>
                         <!-- end profile-content -->
                      </div>
                   </div>
                </div>
             </div>
                     </div>
                 </div>
             </div>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
          const updateButton = document.getElementById("updateProfile");
      
          updateButton.addEventListener("click", async function (event) {
              event.preventDefault();
      
              const token = localStorage.getItem("jwt_token"); // Ensure user is authenticated
      
              if (!token) {
                  alert("User not authenticated!");
                  return;
              }
      
              // Collecting data from form fields
              const data = {
                  profile_name: document.getElementById("profile_name").value,
                  subheading: document.getElementById("subheading").value,
                  skills: document.getElementById("skills").value,
                  bio: document.getElementById("bio").value,
                  gender: document.getElementById("gender").value,
                  mobile_no: document.getElementById("mobile_no").value,
                  social_links: document.getElementById("social_links").value,
                  experience: document.getElementById("experience").value,
                  is_public: document.getElementById("is_public").checked
              };
      
              try {
                  const response = await fetch("http://127.0.0.1:5000/profile", {
                      method: "PUT",
                      headers: {
                          "Content-Type": "application/json",
                          "Authorization": `Bearer ${token}`
                      },
                      body: JSON.stringify(data)
                  });
      
                  const result = await response.json();
                  if (response.ok) {
                      alert("Profile updated successfully!");
                  } else {
                      alert("Error: " + result.error);
                  }
              } catch (error) {
                  console.error("Error updating profile:", error);
              }
          });
      });
      </script>
      
  </body>
</html>